<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio10</title>
</head>

<body>
    <script>
        class Pelicula {
  static generosAceptados = [
    "Action", "Adult", "Adventure", "Animation", "Biography", "Comedy",
    "Crime", "Documentary", "Drama", "Family", "Fantasy", "Film Noir",
    "Game-Show", "History", "Horror", "Musical", "Music", "Mystery",
    "News", "Reality-TV", "Romance", "Sci-Fi", "Short", "Sport",
    "Talk-Show", "Thriller", "War", "Western"
  ];

  constructor(id, titulo, director, anio, pais, genero, calificacion) {
    // Validaciones
    if (!Pelicula.validarID(id)) throw new Error("ID inválido. Debe tener 9 caracteres, los primeros 2 letras y los 7 restantes números.");
    if (!Pelicula.validarTitulo(titulo)) throw new Error("Título inválido. No debe superar los 100 caracteres.");
    if (!Pelicula.validarAnio(anio)) throw new Error("Año inválido. Debe ser un número entero de 4 dígitos.");
    if (!Pelicula.validarArray(pais)) throw new Error("País inválido. Debe ser un array.");
    if (!Pelicula.validarGenero(genero)) throw new Error("Género inválido. Debe estar en la lista de géneros aceptados.");
    if (!Pelicula.validarCalificacion(calificacion)) throw new Error("Calificación inválida. Debe ser un número entre 0 y 10.");

    this.id = id;
    this.titulo = titulo;
    this.director = director;
    this.anio = anio;
    this.pais = pais;
    this.genero = genero;
    this.calificacion = calificacion;
  }

  static validarID(id) {
    return /^[A-Za-z]{2}\d{7}$/.test(id);
  }

  static validarTitulo(titulo) {
    return titulo.length <= 100;
  }

  static validarAnio(anio) {
    return /^\d{4}$/.test(anio);
  }

  static validarArray(arr) {
    return Array.isArray(arr);
  }

  static validarGenero(generos) {
    if (!Array.isArray(generos)) return false;
    return generos.every(gen => Pelicula.generosAceptados.includes(gen));
  }

  static validarCalificacion(calificacion) {
    return typeof calificacion === "number" && calificacion >= 0 && calificacion <= 10;
  }

  static generosPermitidos() {
    return Pelicula.generosAceptados;
  }

  fichaTecnica() {
    return `
      Título: ${this.titulo}
      Director: ${this.director}
      Año: ${this.anio}
      País: ${this.pais.join(", ")}
      Géneros: ${this.genero.join(", ")}
      Calificación: ${this.calificacion}
    `;
  }
}

const peliculasData = [
  {
    id: "AA1234567",
    titulo: "Indiana Jones y la ultima cruzada",
    director: "Spilberg",
    anio: 1989,
    pais: ["USA"],
    genero: ["Action", "Adventure"],
    calificacion: 8.8
  },
  {
    id: "BB2345678",
    titulo: "Parasite",
    director: "Bong Joon-ho",
    anio: 2019,
    pais: ["South Korea"],
    genero: ["Drama", "Thriller"],
    calificacion: 8.6
  },
  {
    id: "CC3456789",
    titulo: "The Godfather",
    director: "Francis Ford Coppola",
    anio: 1972,
    pais: ["USA"],
    genero: ["Crime", "Drama"],
    calificacion: 9.2
  }
];

// Crear instancias y mostrar ficha técnica
peliculasData.forEach(data => {
  try {
    const pelicula = new Pelicula(
      data.id,
      data.titulo,
      data.director,
      data.anio,
      data.pais,
      data.genero,
      data.calificacion
    );
    console.log(pelicula.fichaTecnica());
  } catch (error) {
    console.error(error.message);
  }
});

    </script>
</body>

</html>